
<html>
<script src="https://d3js.org/d3.v5.min.js"></script>
<style> circle {fill: lightblue; stroke: black;} </style>
  <link rel="stylesheet" type="text/css" href="pointLabel.css">
<body onload="init()">
  
<div id="checkBoxDiv">

  <p>
  <input class = "checkbox" type="checkbox" id="American" name="regions"  style="width:20;height:20; background-color:blue;" value="American" checked/> 
  <label for="American" style="background-color:blue; font-size:20; color:white;">American</label>
</p>
  
<p>
    <input type="checkbox" class = "checkbox" id="Asian" name="regions" style="width:20;height:20; background-color:ffff00;" value="Asian" />
  <label for="Asian" style="background-color:yellow;font-size:20; color:blue;">Asian</label>
</p>
  
  <p>
  <label style="background-color:red;"></label>
  <input type="checkbox" class = "checkbox" id="European" name="regions" style="width:20;height:20; background-color:red;" value="European" checked />
  <label for ="European" style="background-color:red; font-size:20; color:white;">European</label>
 </p>
  
</div>
  <label style="background-color:white;"></label>
  
<!--  <svg id="svg1" width="400" height="400" x="0" y="0" style="background-color:lightblue">   -->
  
  
<!-- <div id="viz"> -->
  

<!--  </div>   -->
  
  <rect id="textBox" value="WHF"></rect>
  
  

  
  
  
  
  
  
  <p>
  <button id = "2017" onclick = "openYear(2017)">2017</button>
  <button id = "2018" onclick = "openYear('2018')">2018</button>
  <button id = "2019" onclick = "openYear(2019)">2019</button>
  </p>
  
<script>
async function init() {

  
  document.getElementById("2017").style.backgroundColor='grey';
  
  
  
  
  //<svg id="svg1" width="400" height="400" x="0" y="0" style="background-color:lightblue"> 
    
  const svgWidth = 600
  const svgHeight = 600
  
  const svgWidth2 = 500
  const svgHeight2 = 500
  
  const margin  = 50
    
  var svg_1 = d3.select("body").append("svg").attr("id", "svg1").attr("x", 0).attr("y", 0).attr("height", svgHeight)
  .attr("width", svgWidth).style("background-color", "#e6eeff")
  
    var svg_3 = d3.select("body").append("svg").attr("id", "svg3").attr("x", 0).attr("y", 0).attr("height", svgHeight)
  .attr("width", 200).style("background-color", "#e6eeff")
  
  var svg_2 = d3.select("body").append("svg").attr("id", "svg2").attr("x", 400).attr("y", 0).attr("height", svgHeight2 + 100)
  .attr("width", svgWidth2).style("background-color", "#e6eeff")
  

  
  
  
  
  //////// --------------   ANNOTATION  for  Circle  &  RING  -------------------
  
  
    d3.select("#svg3").append("g")//.attr("id", "textBoxG")
    .attr("transform", "translate(10, 500)")
  
    .append("rect").attr("id", "#annotationBox")
    .attr("x", 0).attr("y", 0)
  .attr("height", 60).attr("width", 150)
  //.attr("rx", 25).attr("ry", 35)
  .attr("fill", "#F0F8FF")
  .attr("stroke", "#73AD21")
  .attr("stroke-width", 3)
  .style("opacity", 1)
  
  
  
  
    d3.select("#svg3").append("g")//.attr("id", "textBoxG")
    .attr("transform", "translate(10, 500)")
  
  .append("circle").attr("cx", 20).attr("cy", 18).attr("r", 8)
      .style("fill", "darkgrey")
  .style("stroke", "black")
  .style("stroke-width", 1.5)
  
  
    d3.select("#svg3").append("g")//.attr("id", "textBoxG")
    .attr("transform", "translate(10, 500)")
  .append("circle").attr("cx", 20).attr("cy", 45).attr("r", 8)
      .style("fill", "#F0F8FF")
  .style("stroke", "grey")
  .style("stroke-width", 5)
  
  
        d3.select("#svg3").append("g")//.attr("id", "textBoxG")
    .attr("transform", "translate(10, 500)")
  .append("text").text("2-WD")
      
      .attr("x", 50).attr("y", 25).attr("font-size", 18)

  .style("stroke", "grey")
  
  
  
  
      d3.select("#svg3").append("g")//.attr("id", "textBoxG")
    .attr("transform", "translate(10, 500)")
  .append("text").text("4-WD")
      
      .attr("x", 50).attr("y", 50).attr("font-size", 18)

  .style("stroke", "grey")
  
  
  
  
  /////////////////////////// -----------------------------  TEXT  BOX  -------------------------------
           
           
  d3.select("#svg3").append("g")//.attr("id", "textBoxG")
    .attr("transform", "translate(0, 230)")
   
  //var textBoxG = d3.select("#textBoxG")
  
  
  .append("rect").attr("id", "#textBox")
  //.attr("x", svgWidth - 160).attr("y", 0)
  .attr("x", 0).attr("y", 0)
  .attr("height", 230).attr("width", 180)
  .attr("rx", 25).attr("ry", 35)
  .attr("fill", "lightgrey")
  .style("opacity", 1)
  //.append("text").text("WHAY").attr("fill", "black");   NOT  WORKing,  WON'T  Work
   
  
  
   d3.select("#svg3")
   //textBoxG
  //  .attr("transform", "translate(10, 10)")
.append("g").attr("transform", "translate(90, 260)")
  .append("text").text("Model Details")
     //.attr("transform", "translate(10, 0)")
    //.attr("x", 75).attr("y", 45)
    .style("fill", "black")
   .attr("text-anchor", "middle")
           
//    d3.select("#svg3")
    //textBoxG
    //.attr("transform", "translate(50, 10)")
  
   d3.select("#svg3")
   //textBoxG
  //  .attr("transform", "translate(10, 10)")
.append("g").attr("transform", "translate(100, 275)")
  .append("text").text("--------------------------")
    //.attr("transform", "translate(0, 0)")
    .attr("x", 0).attr("y", 0)
    .style("fill", "black")
   .attr("text-anchor", "middle");
           
  
  
  
  
//var data = await d3.csv("https://raw.githubusercontent.com/xw23/projectcsv/master/cleaned_2017.csv");
var data2017 = await d3.csv("https://raw.githubusercontent.com/xw23/projectcsv/master/cleaned_2017.csv");
var data2018 = await d3.csv("https://raw.githubusercontent.com/xw23/projectcsv/master/cleaned_2018.csv");
var data2019 = await d3.csv("https://raw.githubusercontent.com/xw23/projectcsv/master/cleaned_2019.csv");

var data = data2017;
  
//  const nodata = ""
 
  
  
  
  //var data = await d3.csv("https://raw.githubusercontent.com/xw23/projectcsv/master/cleaned_2017.csv");
var data20172 = await d3.csv("https://raw.githubusercontent.com/xw23/projectcsv/master/BAR_2017.csv");
var data20182 = await d3.csv("https://raw.githubusercontent.com/xw23/projectcsv/master/BAR_2018.csv");
var data20192 = await d3.csv("https://raw.githubusercontent.com/xw23/projectcsv/master/BAR_2019.csv");
  


var data2 = data20172;
  
  
  
  
  
var textSize = d3.scaleLog().domain([-100, 100]).range([1,200]);
  
  
var x1 = d3.scaleLinear()
.domain([d3.min(data, function(d) { return d.CityMPG; }), d3.max(data, function(d) { return d.CityMPG; })])
//.domain([10,60])
.range([0,svgWidth - 100]);        ///////////   for  ZOOM  original
//var x = d3.scaleSymlog().domain([150,10]).range([0, 200]);
//var x = d3.scaleLog().domain([10,150]).range([200, 0]);
                                /////     range([200, 0]), reversed
  
var y1 = d3.scaleLinear()//.domain(d3.extent(data, function(d) { return d.HwyMPG; }))     ////////////   for  ZOOM  in  original
.domain([d3.min(data, function(d) { return d.HwyMPG; }), d3.max(data, function(d) { return d.HwyMPG; })]) ///////////   for  ZOOM  original
//.domain([10,60])
.range([svgHeight - 100, 0]); 
  //var y = d3.scaleLog().domain([10,150]).range([0, 200]);

  
var scaleX2 = d3.scaleLinear()//.domain(d3.extent(data, function(d) { return d.CityMPG; }))
.domain([d3.min(data, function(d) { return d.CityMPG; }), d3.max(data, function(d) { return d.CityMPG; })])      ///////////   for  ZOOM  original
//.domain([10,60])
.range([0,svgWidth - 100]);      /////////   for  ZOOM  in  CHECKBOX  Click
  
var scaleY2 = d3.scaleLinear()//.domain(d3.extent(data, function(d) { return d.HwyMPG; }))
.domain([d3.min(data, function(d) { return d.HwyMPG; }), d3.max(data, function(d) { return d.HwyMPG; })])      ///////////   for  ZOOM  original
//.domain([10,60])
.range([svgHeight - 100, 0]);     /////////   for  ZOOM  in  CHECKBOX  Click
  
  
  
 ///////////////--------------------------AXIS--------------------------------------------------
  
  
  console.log(svgHeight - 100)

//d3.select("body").selectAll("p").data(data).enter().append("p").html(function(d,i) {return d.Make + d.Fuel + d.AverageCityMPG});


d3.select("#svg1")
.append("g").attr("id", "xAxis1")
  .attr("transform", "translate(50, 550)")
.call(d3.axisBottom(x1).ticks()//tickValues([10,20,50,100])    //////   .tickValues([,])  is IN  CALL()  After axisLeft()
//.tickFormat(d3.format(""))
      .tickSize(-500)
);      
//////////   tickFormat(d3.format(""))  show  Numbers , NOT  1 + e 1
          


  

d3.select("#svg1")
.append("g").attr("id", "yAxis1")
  .attr("transform", "translate(50,50)")
.call(d3.axisLeft(y1)//.ticks()
//.tickValues([10,20,50,100]).tickFormat(d3.format(""))
      .tickSize(-500)
)

d3.selectAll(".tick line").attr("stroke", "#D3D3D3")   //////  ---------   BANCH  MARK  LINE ,  COLOR

  
  
  
   //////////////////--------------------------TOOLTIP------------------------------------
    
d3.select('body')
//d3.select('svg')
.append('div')
.attr('id', 'tooltip')
.attr("class", "tooltip")    /////////// 
//.style('left', 'py')
//.style('top', 'px')
.attr('style', 'position: absolute')//; opacity: 1;')  /// to show on SVG
  ;
  
  
  
 ///////------------------------------------RECT---------------------------------------- 
/*  
  d3.select("#svg1")
  .append("g").attr("transform", "translate(50, 10)")
  //.selectAll('rect').data([4,8,15,16,23,42]).enter()
  .append("rect")
  .attr("class", "tooltip-container")  //////////////////
  .attr("x", 15).attr("y", 15)
  .attr("height", 30).attr("width", 30)
  .attr("rx", 5).attr("ry", 35)
  .attr("fill", "black");
  
 */ 
  

  
////////////////////////

var colors = ["red", "yellow", "blue"];
  
  
function set_color(region){
    if (region == "European"){
        return colors[0];}
    if (region == "Asian"){
        return colors[1];}
    if (region == "American"){
        return colors[2];}
}


d3.selectAll("checkbox").style("hight", "100")  //style("background-color", "red").style("font-size", "150")
  


  
  
  
  
///////////////////////////   -----------------------------   UPDATE  1 --------------------------------------  

  
function update1(){
  
   
//  d3.select("svg").call(zoom)   //////////////////////   ???????????????
  
  
  /////////////////////----------------------------------------------------------------
  
  
  d3.selectAll(".checkbox")
    .each(function(d){
    
       cb = d3.select(this);
       //grp = cb.property("value");
    
       
       newData = data.filter(function(d){return d.Region == cb.property("id")})

    
       if (cb.property("checked") ){
         
         
         /////////////////////////////------------------------- POINT LABEL ---------------------------------------
         

d3.select("#svg1")
.append("g").attr("transform", "translate(50,50)")
.selectAll("text").data(newData).enter()
  .append("text").text(function(d){return d.Make})// + " " + d.Model})

.attr("class", function(d) {return d.Region;})         ////////  CLASS  for  SELECTION , in REMOVE 
                ///////////    .selectAll("circle." + cb.property("id"))
         
.attr("id", "textLabel")                         //////////////      for  RESIZE  SELECTION  in  ZOOM


         
     .attr("x", function(d){return scaleX2(d.CityMPG);})
      .attr("y", function(d){return scaleY2(d.HwyMPG) + 13;})
  .attr("text-anchor", "middle")
  //.attr("font-color", "grey")//.attr("stroke", "grey")
  .attr("fill", "grey")
  .attr("font-size", 12)
//.attr("display", "on");
     
         
         
         
         
         ///////////////////  ---------------------------- SCATTER  POINTS -----------------------------------

         
         
         
         
d3.select("#svg1")
.append("g").attr("transform", "translate(50,50)")

//.selectAll("circle").data(newData.filter(function(d){return d.Drive == "2WD"; })).enter().append("circle")
.selectAll("circle").data(newData).enter().append("circle")

.attr("class", function(d) {return d.Region;})   
                   ////////  CLASS  for  SELECTION , in REMOVE 
                ///////////    .selectAll("circle." + cb.property("id"))
         
//.attr("cx", function(d){return newXScale(d.CityMPG)})
//.attr("cy", function(d){return newYScale(d.HwyMPG)})
         

         
.attr("cx", function(d, i) {return scaleX2(d.CityMPG);})      /////////   for  ZOOM  in  CHECKBOX  Click
                       ///  CX & y: big to small,  CY & x : small to big
.attr("cy", function(d, i) {return scaleY2(d.HwyMPG);})      //////////   for  ZOOM  in  CHECKBOX  Click
                       ///  CX & y: big to small,  CY & x : small to big
      
.attr("r", function(d, i) {return Number(d.Cyl) + 0.5;})
///.attr("r", function(d, i) {return Number(d.Cyl) + 2.0;});
                     /////////    PARSEINT ( )  or   Number ( )
  
         
        //////////////////   ------------------   use  FUCTION  to  SET   FILL ----------- 
.style("fill", function(d){
           if (d.Drive == "2WD") {return set_color(d.Region)}
         else {return "grey"}}
      )

.style("stroke", function(d){
           if (d.Drive == "2WD") {return "black"}
           else {return set_color(d.Region)}})
           
.style("stroke-width", function(d){
           if (d.Drive == "2WD"){return 1.5}
           else {return 3.5}
         })
          
         
.style("opacity", 0.65)
       /////////////////////    RETURN   a  FUNCTION

  
//.style("stroke", function(d){return set_color(d.Region)})
//.style("stroke-width", 2)
         
  
  .on('mouseover', function(d) {
           
           
                      
/////////////////////  ------------------------------  TEXT   BOX  ------------------------------------
           
           
  
  d3.select("#svg3")
  .append("g")
  .attr("transform", "translate(10, 300)")
     
  .append("text")
           
  .attr("dy", "0em") 
           
  .text(d.Make + " " + d.Model)    ///////  this is  INSIDE  a  function , D is already  DECLAREd          
  .attr("x", 0).attr("y", 0)
           
           .attr("font-size", 15)           //////----------   CONTROLS  ALL
            .attr("id", "info")
            .style("fill", "black")
            .attr("text-anchor", "left")
   
       
  .append("tspan")
  .attr("dy", "3em") 
  .text("Hwy MPG :" + d.HwyMPG)
  //.attr("id", "info")
   .attr("x", 0).attr("y", 0)
  
  
  .append("tspan")           ////////////////    TSPAN     different  lineS
  .attr("dy", "1.5em") 
  .text("City MPG : " + d.CityMPG)
  .attr("x", 0).attr("y", 0)
           
           
  .append("tspan")
  .attr("dy", "4.5em") 
  .text("Cylinders :" + d.Cyl)
  //.attr("id", "info")
   .attr("x", 0).attr("y", 0)
  
         
  .append("tspan")
  .attr("dy", "6em") 
  .text("Drive :" + d.Drive)
  //.attr("id", "info")
   .attr("x", 0).attr("y", 0)
  
    .append("tspan")
  .attr("dy", "7.5em") 
  .text("Fuel :" + d.Fuel)
  //.attr("id", "info")
   .attr("x", 0).attr("y", 0)
  
      .append("tspan")
  .attr("dy", "9em") 
  .text(d.VehClass)
  //.attr("id", "info")
   .attr("x", 0).attr("y", 0)
  
  
  
           
           
  d3.select('#tooltip').       /////  Select('#TOOLTIP')   :  TEXT
style('opacity', 1)
.text(d.Make + " " + d.Model + " , City MPG: " + d.CityMPG + ", Hwy MPG :" + d.HwyMPG)
/*
.text(d.Make + " " + d.Model + `
 City MPG: ` + d.CityMPG + `
 Hwy MPG :` + d.HwyMPG)                    //////////////    NOT  Working
 */
    

    .style("font-size", 15)
  .style("left",(event.pageX / 2))     ////////   to  CENTER
    .style("top",(event.pageY + 10))
   .style("background", "white")        ////////////
   .style("border-radius", "18")
  .style("border", "solid")
    .style("border-width", 1.5)
  //.style("text-anchor", "middle")   ////  NOT WORKING
          
           
           
  
 d3.select(this)             /////  Select(THIS)   :    CIRCLE
      .style("stroke", "black").style("fill", "white")
           
                 
           


    
           
})
.on('mouseout', function(d) {
  d3.select('#tooltip').style('opacity', 0).text("")
  d3.select(this)//.style('opacity', 1)
      // .style("fill", function(d){return set_color(d.Region)})//.text(d.Make + " " + d.Model)
           
           
  .style("fill", function(d){
           if (d.Drive == "2WD") {return set_color(d.Region)}
         else {return "grey"}}
      )

.style("stroke", function(d){
           if (d.Drive == "2WD") {return "black"}
           else {return set_color(d.Region)}})
           
.style("stroke-width", function(d){
           if (d.Drive == "2WD"){return 1.5}
           else {return 3.5}
         })
          
         
.style("opacity", 0.65)
           
    /////////////////////////// -----------------------------  TEXT  BOX  -------------------------------

d3//.select("svg")
  .select("#textBox")
           
           
d3.select("#info").remove()
  // .style('opacity', 0)
 
              
})
//.on('mousemove', function(d) {d3.select('#tooltip').transition().duration(200).style('opacity', 1).text("B")})
/*
.on("click", function () {
  window.open("new.html")
})  
*/
         

}           
         

    
    
    else
      
    {
        d3.select("#svg1").selectAll("circle." + cb.property("id")).remove(); 
        d3.select("#svg1").selectAll("text." + cb.property("id")).remove();
         /////////////   .selectAll("circle." + cb.property("id"))   ,  by CLASS 
    }
    
   // d3.select("svg").call(zoom)   //////////////////////   ???????????????
  
  })
    
}

      
  
  //////////////////// -----------------   see  UPDATE 3 ---------------
  
  // d3.selectAll(".checkbox").on("change",update1);
  
 // update1();    /////////  so when page is loaded, CIRCLES SHOW as Box CHECKed
    
  
  ///////////////////////////--------------------------- ZOOM ---------------------------------
  

   
  var xAxis1 = d3.axisBottom(x1)
  var yAxis1 = d3.axisLeft(y1)
  
  
  
  var xAxisGroup1 = d3.select("#svg1")//.selectAll("g")//.selectAll("g")
  .select("#xAxis1")
  //.select("g")
  .attr("transform", "translate(50,550)").call(xAxis1
                                               .tickSize(-(svgHeight - margin * 2)))     //////////  -------------    TICK SIZE ()
  
  
                        /////////////////  -----------------   TICK SIZE  ------------- RE - ASSIGN  -----------

  var yAxisGroup1 = d3.select("#svg1")//.selectAll("g")
  .select("#yAxis1")
  //.select("g")
  .attr("transform", "translate(50,50)").call(yAxis1
                                          .tickSize(-(svgHeight - margin * 2)))     //////////  ----------------    TICK SIZE ()
  
  
d3.selectAll(".tick line").attr("stroke", "grey")      //////  ---------   BANCH  MARK  LINE ,  COLOR

  
  
  var zoom = d3.zoom()
  
  
  zoom.on("zoom", function(){
    
    
  
  //d3.zoom().on("zoom", function(){           /////////////////   NOT  WORKING
    
    
    
    
  
      d3.selectAll(".checkbox").on("change",update3);
    
    
 //////////////////// -----------------   see  UPDATE 3 ---------------

    
  update3();            /////////  so when page is loaded, CIRCLES SHOW as Box CHECKed
    

//    d3.selectAll(".checkbox").on("change",update2);
    
//  update2();              /////////////////////     UPDATE  2 ,   needed
    
    
      var newXScale1 = d3.event.transform.rescaleX(x1)
      var newYScale1 = d3.event.transform.rescaleY(y1)
      
      var newAnnotationScale = d3.event.transform.rescaleX(textSize)
 
      
      
      scaleX2 = newXScale1;             ///////////////      for  ZOOM  in  CHECKBOX  Click
      scaleY2 = newYScale1;             ///////////////     for  ZOOM  in  CHECKBOX  Click
    
    
xAxis1.scale(newXScale1)
 yAxis1.scale(newYScale1)
      
    
    xAxisGroup1.call(xAxis1)
    yAxisGroup1.call(yAxis1)
    
    
    
    
    
    
      
    //////////////////////---------------------------- POINT  LABEL  in ZOOM -----------------------------------
    
 //d3.selectAll("#American").remove()
    
    //d3.select("svg").selectAll("text.American").remove();
   
    
    
   
        d3.select("#svg1")
      .selectAll("#textLabel")
     .attr("x", function(d){return newXScale1(d.CityMPG)})
      .attr("y", function(d){return newYScale1(d.HwyMPG) + 13})
    
    .attr("fill", "grey")//.attr("stroke", "grey")
  .attr("font-size", 12); // newAnnotationScale(2));
  
    
    
    
    
    
    
    d3.select("#svg1").selectAll("circle")//.merge(newelements)
    .attr("cx", function(d){return newXScale1(d.CityMPG)})
    .attr("cy", function(d){return newYScale1(d.HwyMPG)})
    .style("opacity", 0.65)
 
    
    
    

    
    
    //////////////////// -----------------   see  UPDATE 3 ---------------

    
//d3.selectAll(".checkbox").on("change",update1);
  
//  update1();    /////////  so when page is loaded, CIRCLES SHOW as Box CHECKed
  
  

  })
  

  
  d3.select("svg").call(zoom) 
  
  
  
  
  //d3.select("svg").call(d3.zoom())      ///////////  NOT  WORKING
  

  
  
    ///////////////////// ----------------------------------------------------------------------
  
  
  /*
  
  var xAxis = d3.axisBottom(x)
  var yAxis = d3.axisLeft(y)
  
  var xAxisGroup = d3.select("svg")//.selectAll("g")//.selectAll("g")
  .select("#xAxis")
  //.select("g")
  .attr("transform", "translate(50,250)").call(xAxis)
  
  var yAxisGroup = d3.select("svg")//.selectAll("g")
  .select("#yAxis")
  //.select("g")
  .attr("transform", "translate(50,50)").call(yAxis)
  
  
  var zoom = d3.zoom()
  
  zoom.on("zoom", function(){
    
    
      var newXScale = d3.event.transform.rescaleX(x)
      var newYScale = d3.event.transform.rescaleY(y)

    
xAxis.scale(newXScale)
 yAxis.scale(newYScale)
      
    
    xAxisGroup.call(xAxis)
    yAxisGroup.call(yAxis)
    
    
    
    d3.select("svg").selectAll("circle")//.merge(newelements)
    .attr("cx", function(d){return newXScale(d.CityMPG)})
    .attr("cy", function(d){return newYScale(d.HwyMPG)})
 
    
    
//    d3.select("svg")
//.append("g").attr("transform", "translate(50,50)").call(d3.axisLeft(x))
//.call(xAxis)
      
    
//        d3.select("svg")
//.append("g").attr("transform", "translate(50,50)").call(d3.axisBottom(y))
//.call(yAxis)
    
     // t = d3.event.transform()
    
   //   newXScale = t.rescaleX()
    
  

    
    


  })
  
  
  */
  
  
  //d3.select("svg").call(zoom) 
  
  

  

  
 /////////////////////////------------------------LABELS-------------------------------------------- 
  
d3.select("svg")
  .append("text")
  .attr("id", "title")
  .text("2017 Vehicle Data")
  //.text(d3.extent(data.CityMPG))
  //.text(data.CityMPG)
  .attr("x", svgWidth / 2).attr("y", 30)
  .attr("text-anchor", "middle")
  .attr("fill", "orange").attr("stroke", "grey")
  .attr("font-size", 25);
  
  

  
d3.select("svg")
  .append("text")
  .text("Highway MPG")
  
  .attr("transform", "rotate(-90)")
  
  .attr("x", -(svgHeight / 2) ).attr("y", 20)
  .attr("text-anchor", "middle")
  .attr("fill", "black")//.attr("stroke", "black")
  .attr("font-size", 20);
  
  
d3.select("svg")
  .append("text")
  .text("City MPG")
  .attr("x", svgWidth / 2 ).attr("y", svgHeight - 20)
  .attr("text-anchor", "middle")
  .attr("fill", "black")//.attr("stroke", "black")
  .attr("font-size", 20);
  


  
  
  ////////////////////////////////--------------------------- BUTTONS ----------------------------------------
  
  
openYear = function(year){             /////////////////////////////////////

  
  
  
    //document.getElementById("2017").style.backgroundColor='lightgrey'
  //document.getElementById("2018").style.backgroundColor='lightgrey'
  //document.getElementById("2019").style.backgroundColor='lightgrey'
  
  d3.selectAll("button").style("background-color", "lightgrey")
  
  document.getElementById(year).style.backgroundColor='grey';      ///////  CHANGE  BACKGROUND  Color
  

  
  ////d3.select("#2017").remove()                /////////////  
  
  
   d3.select("svg")
  .select("#title")
  .text(year + "  Vehicle Data")
  .attr("x", svgWidth / 2).attr("y", 30)
  .attr("text-anchor", "middle")
  .attr("fill", "orange").attr("stroke", "grey")
  .attr("font-size", 25);
  
  
  data = eval('data' + year);                ////////////     DYNAMIC  Varibles  ,  use   EVAL ( )
        //  window['data' + year];     ///  NOT  Working !!  ONLY  for  ASSIGNMENT ??  NOT  REtrival ??
  
  d3.select("svg").selectAll("circle").remove()          /////////   REMOVE  EXISTing  circles,  
                                                       /////////  or will  append new to old
  
  d3.select("svg").selectAll("#textLabel").remove()
  
  //update1();                     ////////////    APPEND  NEW circles  in a  circle - FREE  CLEAN  sheet
  
   ///  update3();             /////////////////   ----------------  NOT  WORKING  ,   WHY  ????????

  
 /////////////////////////////////////////////////////   SVG 2   YEAR---------------------------

  d3.select("#svg2")
  .select("#title2")
  .text(year + "  Model Count by Brand")
  .attr("x", 200).attr("y", 30)
  .attr("text-anchor", "middle")
  .attr("fill", "orange").attr("stroke", "grey")
  .attr("font-size", 25);
  
  
  data2 = eval('data' + year + '2');                ////////////     DYNAMIC  Varibles  ,  use   EVAL ( )
        //  window['data' + year];     ///  NOT  Working !!  ONLY  for  ASSIGNMENT ??  NOT  REtrival ??
  
  d3.select("#svg2").selectAll("rect").remove()          /////////   REMOVE  EXISTing  circles,  
                                                       /////////  or will  append new to old
  
  d3.select("#svg2").selectAll("#textLabel").remove()
  
  
  //update2();
  
  
     //////////////////// -----------------   see  UPDATE 3 ---------------
  update3();
  
}
  

 

  
  
  
  
  
  
  
  
  
  
  
  //////////////////////   ---------------------------     SVG 2 ,   ChartSvg  -----------------------
  
  
 
  
    var x2 = //d3.scaleLinear().domain([10, 200])
    d3.scaleBand().domain(data2.map(function(d) {return d.Make; }))
.range([0,400])   //svgWidth2 - (margin * 2)])
.padding(0.2);        ///////////   for  ZOOM  original
  
//var x = d3.scaleSymlog().domain([150,10]).range([0, 200]);
//var x = d3.scaleLog().domain([10,150]).range([200, 0]);
                                /////     range([200, 0]), reversed
  
  
  
  
  
  
var y2 = d3.scaleLinear().domain([0, d3.max(data2, d => +d.NumOfModel)])//.domain([10, 150])//d3.extent(data, function(d) { return d.HwyMPG; }))
                          ////////////////      +     SIGN  :   change  STRing  to  NUMERIC
.range([400, 0])//svgHeight2 - (margin * 2), 0])
.nice()                ////    CUTOFF  VALUE  is  a  WHOLE
;      ////////////   for  ZOOM  in  original
//var y = d3.scaleLog().domain([10,150]).range([0, 200]);
  
  
  

  
   ///////////////--------------------------AXIS--------------------------------------------------
  
  
  

//d3.select("body").selectAll("p").data(data).enter().append("p").html(function(d,i) {return d.Make + d.Fuel + d.AverageCityMPG});


d3.select("#svg2")
.append("g")
.attr("id", "xAxis2")
  .attr("transform", "translate(50, 450)")
.call(d3.axisBottom(x2).ticks()//tickValues([10,20,50,100])    //////   .tickValues([,])  is IN  CALL()  After axisLeft()
//.tickFormat(d3.format(""))             #####    NO Working  for  NON - NUMERIC
)  
  
        d3.select("#svg2").selectAll("text")  
    .style("text-anchor", "end")
    .attr("dx", "-.8em")
    .attr("dy", ".15em")
    .attr("transform", "rotate(-55)")
  .attr("font-size", 10)
//////////   tickFormat(d3.format(""))  show  Numbers , NOT  1 + e 1
             

  
  

d3.select("#svg2")
.append("g").
attr("id", "yAxis2")
  .attr("transform", "translate(50,50)")
.call(d3.axisLeft(y2)
      .ticks()
      
.tickSize(-400)             ///////////// -----------------    BENCH Mark  BAR s  ---------- 

      
      
//.tickValues([10,20,50,100]).tickFormat(d3.format(""))
)
  
.selectAll(".tick line").attr("stroke", "lightblue")   //////  ---------   BANCH  MARK  LINE ,  COLOR
;

  
  
     //////////////////--------------------------TOOLTIP------------------------------------
    
d3.select('body')
  .select("#svg2")
//d3.select('svg')
.append('div')
.attr('id', 'tooltip2')
.attr("class", "tooltip2")    /////////// 
//.style('left', 'py')
//.style('top', 'px')
.attr('style', 'position: absolute')//; opacity: 1;')  /// to show on SVG
  ;
  
  
  

  
   
 /////////////////////////------------------------LABELS-------------------------------------------- 
  
d3.select("#svg2")
  .append("text")
  .attr("id", "title2")
  .text("2017 Model Count by Brand")
  //.text(d3.extent(data.CityMPG))
  //.text(data.CityMPG)
  .attr("x", 200).attr("y", 30)
  .attr("text-anchor", "middle")
  .attr("fill", "orange").attr("stroke", "grey")
  .attr("font-size", 25);
  
  

  
d3.select("#svg2")
  .append("text")
  .text("Number of Models")
  
  .attr("transform", "rotate(-90)")
  
  .attr("x", -(svgHeight - 100) / 2).attr("y", 20)
  .attr("text-anchor", "middle")
  .attr("fill", "black")//.attr("stroke", "black")
  .attr("font-size", 20);
  

  
  
  
  function update2(){
  
   
//  d3.select("svg").call(zoom)   //////////////////////   ???????????????
  
  
  /////////////////////----------------------------------------------------------------
  
  
  d3.selectAll(".checkbox")
    .each(function(d){
    
       cb = d3.select(this);
       //grp = cb.property("value");
    
       
       newData2 = data2.filter(function(d){return d.Region == cb.property("id")})

    
       if (cb.property("checked") ){
         
         
         

         
         d3.select("#svg2")
.append("g")
.attr("transform", "translate(50,50)")
         
.selectAll("rect").data(newData2).enter().append("rect")
//.transition().duration(2000)

.attr("class", function(d) {return d.Region;})
                   ////////  CLASS  for  SELECTION , in REMOVE 
   
         ///////////    .selectAll("\." + cb.property("id"))

         
//.attr("cx", function(d){return newXScale(d.CityMPG)})
//.attr("cy", function(d){return newYScale(d.HwyMPG)})


         
         
.attr("x", function(d){return x2(d.Make);})//function(d, i) {return i * 10;})      /////////   for  ZOOM  in  CHECKBOX  Click
// .attr("x", function(d) {return scaleX2(d.Manufacturer); })  
         ///  CX & y: big to small,  CY & x : small to big
.attr("y", function(d){return y2(d.NumOfModel);} )//function(d, i) {return d.HwyMPG;})      //////////   for  ZOOM  in  CHECKBOX  Click
                       ///  CX & y: big to small,  CY & x : small to big
  
.attr("width", x2.bandwidth())       /////      function(d, i) {return Number(d.Cyl) * 2;})
               //////////////  ----------------------    . BANDWIDTH()    auto calculated         
//.attr("width", 10)//scaleX2(5))         
         
///.attr("r", function(d, i) {return Number(d.Cyl) + 2.0;});
                     /////////    PARSEINT ( )  or   Number ( )
  
.attr("height", function(d, i){return svgHeight2 - margin * 2 - y2(d.NumOfModel);})
       /////////////////////    RETURN   a  FUNCTION
         
.style("fill", function(d){return set_color(d.Region)})      
         
         
         
  
  
  .on('mouseover', function(d) {
  d3.select('#tooltip').       /////  Select('#TOOLTIP')   :  TEXT
style('opacity', 1)
  .text(d.Make + " : " + d.NumOfModel + " models")

    .style("font-size", 13)
  .style("left",(event.pageX + 10)).style("top",(event.pageY + 10))
   .style("background", "white")        ////////////
   .style("border-radius", "18")
  .style("border", "solid")
    .style("border-width", 1.5)
  
 d3.select(this)             /////  Select(THIS)   :    CIRCLE
      .style("stroke", "black").style("fill", "white")
})



.on('mouseout', function(d) {
  d3.select('#tooltip').style('opacity', 0).text("")
  d3.select(this)//.style('opacity', 1)
      .style("fill", function(d){return set_color(d.Region)})//.text(d.Make + " " + d.Model)
})
//.on('mousemove', function(d) {d3.select('#tooltip').transition().duration(200).style('opacity', 1).text("B")})

         
/*
.on("click", function () {
  window.open("new.html")
}) 
*/


         
         
         
////////////////////////////////////////------------------------- POINT LABEL ---------------------------------------
         

d3.select("#svg2")
.append("g").attr("transform", "translate(50,50)")
.selectAll("text").data(newData2).enter()
.append("text").text(function(d){return d.NumOfModel;})

.attr("class", function(d) {return d.Region;})         ////////  CLASS  for  SELECTION , in REMOVE 
                ///////////    .selectAll("circle." + cb.property("id"))
         
.attr("id", "textLabel")                         //////////////      for  RESIZE  SELECTION  in  ZOOM
         
//     .attr("x", 100)//function(d, i){return i * 10})
//      .attr("y", 100)//function(d){return 400 - d.HwyMPG + 20;})
               

.attr("x", function(d){return x2(d.Make);})                  
.attr("y", function(d){return y2(d.NumOfModel) - 10;})
  
         
  //.attr("text-anchor", "middle")
  //.attr("font-color", "grey")//.attr("stroke", "grey")
         
  //.attr("transform", "rotate(90)")      //////////   WRONG ,   ROTATE  entire  as  a  ROW     

  .attr("fill", "black")
  .attr("font-size", 12);
     
         
                     //////////////      for  RESIZE  SELECTION  in  ZOOM
 

         
         
         
         
         
         
}
    
    else
      
    {
        d3.select("#svg2").selectAll("rect." + cb.property("id")).remove(); 
        d3.select("#svg2").selectAll("text." + cb.property("id")).remove();
         /////////////   .selectAll("circle." + cb.property("id"))   ,  by CLASS 
    }
    
   // d3.select("svg").call(zoom)   //////////////////////   ???????????????
  
  })
    
}

      
  

  
  function update3(){
    update1();
    update2();
  }
  
  
  //////////////////// -----------------   see  UPDATE 3 ---------------

  
    d3.selectAll(".checkbox").on("change",update3);
  
  update3();    /////////  so when page is loaded, CIRCLES SHOW as Box CHECKed
    
  
  
  
    //////////////////////   ---------------------------     SVG 2 ,   ChartSvg  -----------------------
  
  
  
  
  
}
  
  
  
  
  
</script>
</body>
</html>


